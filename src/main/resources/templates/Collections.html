<!DOCTYPE html>
<html lang="en" xmlns:th="http://www.thymeleaf.org">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <!--  TODO:change to user data point so darkmode preference is maintained. -->
    <link id="mode" rel="stylesheet" href="/styles/SiteWideStyles/LightMode.css">
    <title>Collections Page</title>
</head>
<body>
	<header>Collections</header>
	<div th:if="${!pages.isEmpty()}" th:each="pageNumber:${pages}"><a th:text="${pageNumber}" th:href=@{/collections(page=${pageNumber})}></a></div>
	<table>
		<thead>
            <tr>
                <th>Collection Name</th>
                <th>Item Type</th>
                <th>Delete Collection</th>
            </tr>
        </thead>
        <tbody>
            <tr th:each = "collection : ${collections}">
                <td><a th:text = "${collection.name}" th:href="@{'/collections/'+${collection.name}}"></a></td>
                <td th:text = "${collection.allowedType.name}"></td>
                <td><form th:method="DELETE" th:action="@{'/collections/'+${collection.name}}"><button id="submit" th:text="'Delete '+ ${collection.name}"></button></form></td>
            </tr>
        </tbody>
	</table>
	
	<div th:if="${param.error}">
         <p id="putErr" style="color:red">Something went wrong</p>
    </div>
	<form th:method="PUT" th:action="@{/collections}">
			<label for="name">Name:</label> 
			<input type="text" 
					id="name"
					name="name"
					placeholder = "Enter collection name"
					>
			<label for="itemType">Type:</label> 
			<select id="itemType" name="itemType">
				<option th:each = "type:${types}" th:value = "${type.name}" th:text="${type.name}"></option>
			</select>
			<button id="submit">Add Collection</button>
	</form>
	<form th:method="PUT" th:action="@{/type}">
		<label for="name">Name:</label><input type="text" 
					id="name"
					name="name"
					placeholder = "Enter type name"
					>
		<button id="submit">Add Item Type</button>
	</form>
</body>
</html>